<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>WexBIM Loader</title>
		<style>
			body { 
				margin: 0; 
				overflow: hidden;
				font-family: Arial, sans-serif;
			}
			
			#fps-counter {
				position: absolute;
				top: 5px;
				right: 5px;
				background-color: rgba(0,0,0,0.5);
				color: white;
				padding: 5px;
				border-radius: 3px;
				font-family: monospace;
				z-index: 1000;
			}
			
			/* Side menu container */
			#side-menu {
				position: absolute;
				top: 10px;
				left: 10px;
				width: 280px;
				max-height: calc(100vh - 20px);
				overflow-y: auto;
				z-index: 1000;
			}
			
			/* Panel styles */
			.panel {
				background-color: rgba(0, 0, 0, 0.8);
				color: white;
				padding: 15px;
				border-radius: 8px;
				margin-bottom: 10px;
				box-shadow: 0 0 10px rgba(0,0,0,0.5);
			}
			
			.panel h3 {
				margin-top: 0;
				color: #4CAF50;
				font-size: 16px;
				display: flex;
				justify-content: space-between;
				align-items: center;
				cursor: pointer;
			}
			
			.panel h3 .toggle-icon {
				font-size: 18px;
				transition: transform 0.3s;
			}
			
			.panel h3 .toggle-icon.collapsed {
				transform: rotate(-90deg);
			}
			
			.panel-content {
				transition: max-height 0.3s ease;
				overflow: hidden;
			}
			
			.panel-content.collapsed {
				max-height: 0;
			}
			
			.panel p {
				margin: 5px 0;
				font-size: 14px;
			}
			
			.panel button {
				background: #4CAF50;
				color: white;
				border: none;
				padding: 5px 10px;
				margin: 5px 5px 0 0;
				border-radius: 4px;
				cursor: pointer;
				transition: background 0.2s;
			}
			
			.panel button:hover {
				background: #3d8b3d;
			}
			
			/* Settings panel specific styles */
			#settings-panel div {
				margin: 10px 0;
			}
			
			#settings-panel label {
				display: block;
				margin-bottom: 8px;
			}
			
			#settings-panel select {
				background: #333;
				color: white;
				border: 1px solid #555;
				padding: 3px;
			}
			
			.shortcut-info {
				margin-top: 15px;
				font-size: 12px;
				border-top: 1px solid #555;
				padding-top: 10px;
			}
			
			/* File chooser panel specific styles */
			#file-drop-zone {
				border: 2px dashed #aaa;
				padding: 10px;
				text-align: center;
				border-radius: 5px;
				margin: 10px 0;
				transition: all 0.3s;
			}
			
			#file-drop-zone.highlight {
				background: rgba(76, 175, 80, 0.2);
				border-color: #4CAF50;
			}
			
			#file-drop-zone p {
				margin: 5px 0;
				font-size: 14px;
			}
			
			.file-input-label {
				display: inline-block;
				background: #4CAF50;
				color: white;
				padding: 6px 12px;
				border-radius: 4px;
				cursor: pointer;
				margin-top: 5px;
				transition: background 0.3s;
			}
			
			.file-input-label:hover {
				background: #3d8b3d;
			}
			
			#file-input {
				position: absolute;
				width: 1px;
				height: 1px;
				padding: 0;
				margin: -1px;
				overflow: hidden;
				clip: rect(0,0,0,0);
				border: 0;
			}
			
			.file-chooser-section {
				margin-top: 15px;
				border-top: 1px solid #555;
				padding-top: 10px;
			}
			
			.file-chooser-section h4 {
				margin: 0 0 8px 0;
				font-size: 14px;
			}
			
			.built-in-model {
				display: block;
				color: white;
				text-decoration: none;
				padding: 5px 0;
				font-size: 14px;
				transition: color 0.2s;
			}
			
			.built-in-model:hover {
				color: #4CAF50;
			}
			
			#recent-files-section {
				margin-top: 15px;
				border-top: 1px solid #555;
				padding-top: 10px;
			}
			
			.recent-file {
				display: block;
				color: #4CAF50;
				text-decoration: none;
				padding: 3px 0;
				font-size: 13px;
				white-space: nowrap;
				overflow: hidden;
				text-overflow: ellipsis;
			}
			
			.recent-file:hover {
				text-decoration: underline;
			}
			
			#loading-indicator {
				position: fixed;
				top: 50%;
				left: 50%;
				transform: translate(-50%, -50%);
				padding: 20px;
				background-color: rgba(0,0,0,0.7);
				color: white;
				border-radius: 5px;
				z-index: 1000;
			}
		</style>
		<script type="importmap">
			{
				"imports": {
					"three": "./node_modules/three/build/three.module.js",
					"three/addons/": "./node_modules/three/examples/jsm/"
				}
			}
		</script>
	</head>
	<body>
		<!-- FPS Counter -->
		<div id="fps-counter">FPS: --</div>
		
		<!-- Side Menu -->
		<div id="side-menu">
			<!-- File Chooser Panel (on top) -->
			<div id="file-chooser-panel" class="panel">
				<h3 data-panel="file-chooser-content">
					Load WexBIM Model
					<span class="toggle-icon">▼</span>
				</h3>
				<div id="file-chooser-content" class="panel-content">
					<div id="file-drop-zone">
						<p>Drag & drop a .wexbim file here</p>
						<p>or</p>
						<label class="file-input-label">
							Browse Files
							<input type="file" id="file-input" accept=".wexbim">
						</label>
					</div>
					
					<div class="file-chooser-section">
						<h4>Built-in Models:</h4>
						<a href="#" class="built-in-model" data-model="./Files/SampleHouse.wexbim">Sample House</a>
						<a href="#" class="built-in-model" data-model="./Files/FourWalls1.wexbim">Four Walls</a>
					</div>
					
					<div id="recent-files-section" style="display: none;">
						<h4>Recent Files:</h4>
						<!-- Recent files will be populated via JavaScript -->
					</div>
				</div>
			</div>
			
			<!-- Model Information Panel -->
			<div id="info-panel" class="panel">
				<h3 data-panel="info-content">
					Model Information
					<span class="toggle-icon">▼</span>
				</h3>
				<div id="info-content" class="panel-content">
					<div>
						<p>Model: Loading...</p>
						<p>Center: (0.00, 0.00, 0.00)</p>
						<p>Size: (0.00, 0.00, 0.00)</p>
					</div>
					<div style="margin-top:10px; border-top: 1px solid #555; padding-top: 10px;">
						<p>Controls: Left-click drag to rotate, right-click drag to pan, scroll to zoom</p>
						<p>Keyboard: F (wireframe), E (edges), P (settings panel)</p>
					</div>
					<div style="margin-top:10px;">
						<button id="toggleWireframe">Toggle Wireframe</button>
						<button id="toggleEdges">Toggle Edges</button>
					</div>
				</div>
			</div>
			
			<!-- Settings Panel -->
			<div id="settings-panel" class="panel">
				<h3 data-panel="settings-content">
					Performance Settings
					<span class="toggle-icon">▼</span>
				</h3>
				<div id="settings-content" class="panel-content">
					<div>
						<label><input type="checkbox" id="toggle-frustum-culling" checked> Frustum Culling</label>
					</div>
					<div>
						<label>Render Quality: 
							<select id="render-quality">
								<option value="high">High</option>
								<option value="medium" selected>Medium</option>
								<option value="low">Low</option>
							</select>
						</label>
					</div>
					<div>
						<button id="apply-settings">Apply</button>
					</div>
					<div class="shortcut-info">
						<strong>Keyboard Shortcuts:</strong><br>
						'P' - Toggle settings panel<br>
						'F' - Toggle wireframe<br>
						'E' - Toggle edges<br>
						'C' - Toggle culling<br>
						'L' - Cycle quality
					</div>
				</div>
			</div>
		</div>
		
		<script type="module" src="./main.js"></script>
	</body>
</html>